(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{285:function(e,t,n){e.exports=n(646)},290:function(e,t,n){},292:function(e,t,n){},313:function(e,t){},315:function(e,t){},355:function(e,t){},646:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(267),o=n.n(r),s=(n(290),n(19)),i=n.n(s),u=n(127),l=n(61),d=n(34),p=n(268),E=n(269),m=n(277),v=n(270),f=n(60),R=n(278),P=n(62),O={Mainnet:["eosio.token-EOS","everipediaiq-IQ"],Testnet:["eosio.token-EOS","eosusdcom111-UZD","dummytokens1-IQ","dummytokens1-UTG","dummytokens1-PTI","dummytokens1-OWN","vig111111111-VIG"]}[Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_CHAIN_NAME||"Testnet"],T=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_CHAIN_NAME||"Testnet";return{Mainnet:{CHAIN_NAME:"Mainnet",CHAIN_ID:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_CHAIN_ID||"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",RPC_PROTOCOL:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_RPC_PROTOCOL||"https",RPC_HOST:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_RPC_HOST||"nodes.get-scatter.com",RPC_PORT:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_RPC_PORT||"443"},Testnet:{CHAIN_NAME:"Testnet",CHAIN_ID:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_CHAIN_ID||"cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f",RPC_PROTOCOL:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_RPC_PROTOCOL||"http",RPC_HOST:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_RPC_HOST||"127.0.0.1",RPC_PORT:Object({NODE_ENV:"production",PUBLIC_URL:"/eosusd-ui",REACT_APP_VERSION:"0.0.1",REACT_APP_PRIVATEKEY:"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"}).REACT_APP_RPC_PORT||"8888"}}[e]}(),h=n(650),A=n(651),_=n(652),b=(n(130),n(292),n(42)),C=n(648),g=n(272),N=n(79),U=n(273),k=n(271),w=n(129);function I(e){var t=e.appName,n=e.activeUser,c=e.onLogin,r=e.onLogout;return a.createElement(C.a,null,a.createElement(g.a,{align:N.a.LEFT},a.createElement(U.a,null,t||"appName"),a.createElement(k.a,null)),a.createElement(g.a,{align:N.a.RIGHT},null!==n?a.createElement(a.Fragment,null,a.createElement("span",null,n&&n.accountName),a.createElement(_.a,{className:w.a.MINIMAL,icon:"log-out",onClick:r})):a.createElement(_.a,{className:w.a.MINIMAL,icon:"log-in",text:"Login",onClick:c})))}var S=n(649),V=n(48);function j(e){var t=e.activeUser;return a.createElement(S.a,{interactive:!0,elevation:V.a.TWO},a.createElement("h5",null,"User tokens"),a.createElement("table",{className:"bp3-html-table bp3-html-table-condensed"},a.createElement("tbody",null,null===t?a.createElement(a.Fragment,null,O.map(function(e){return a.createElement("tr",{key:e},a.createElement("td",null,"--"),a.createElement("td",null,e.split("-")[1]))})):null,t&&!t.balance?a.createElement(a.Fragment,null,O.map(function(e){return a.createElement("tr",{key:e},a.createElement("td",null,"..."),a.createElement("td",null,e.split("-")[1]))})):null,t&&t.balance?a.createElement(a.Fragment,null,Object.keys(t.balance).sort().map(function(e){return a.createElement("tr",{key:e},a.createElement("td",{style:{float:"right"}},t.balance[e]),a.createElement("td",null,e))})):null)))}var M=n(102);var y={appName:"App",activeUser:null,loading:!1};function J(e){var t=Object(a.useState)("eosusdcom111"),n=Object(P.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)("0.0001 EOS"),i=Object(P.a)(s,2),u=i[0],l=i[1],d=Object(a.useState)("support"),p=Object(P.a)(d,2),E=p[0],m=p[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Send test"),c.a.createElement(h.a,{className:"bp3-inline"},"To",c.a.createElement(A.a,{leftIcon:"filter",onChange:function(e){return o(e.currentTarget.value)},defaultValue:r})),c.a.createElement(h.a,{className:"bp3-inline"},"Quantity",c.a.createElement(A.a,{leftIcon:"filter",onChange:function(e){return l(e.currentTarget.value)},defaultValue:u})),c.a.createElement(h.a,{className:"bp3-inline"},"Memo",c.a.createElement(A.a,{leftIcon:"filter",onChange:function(e){return m(e.currentTarget.value)},defaultValue:E})),c.a.createElement("p",null,"support, collateral, payoff debt, borrow"),c.a.createElement(_.a,{loading:e.loading,onClick:function(){e.transfer({to:r,quantity:u,memo:E})}},"Send"),c.a.createElement(_.a,{loading:e.loading,onClick:function(){e.assetout({quantity:u,memo:E})}},"Assetout"))}function x(e){var t=Object(a.useState)("63800"),n=Object(P.a)(t,2),r=n[0],o=n[1];return c.a.createElement("div",null,c.a.createElement("h2",null,"Admin demo tools"),c.a.createElement(_.a,{onClick:function(){return e.updateOracle(r)}},"Update Oracle Price"),c.a.createElement(_.a,{onClick:function(){return e.doUpdate()}},"doUpdate"),c.a.createElement(h.a,{className:"bp3-inline"},"Value",c.a.createElement(A.a,{leftIcon:"filter",onChange:function(e){return o(e.currentTarget.value)},defaultValue:r})))}function D(e){return c.a.createElement("div",null,c.a.createElement("h2",null,"User smart contract stats"),c.a.createElement("div",{style:{width:200}},e.userStats?c.a.createElement("p",null,e.userStats):null))}var L=function(e){function t(e){var n;Object(p.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).activeUser=void 0,console.log("props: ",e);var a=e.ual.chains[0].rpcEndpoints[0],c=a.protocol,r=a.host,o=a.port;return n.state=Object(d.a)({},y,{rpc:new b.JsonRpc("".concat(c,"://").concat(r,":").concat(o))}),n.updateAccountBalances=n.updateAccountBalances.bind(Object(f.a)(n)),n.updateOracle=n.updateOracle.bind(Object(f.a)(n)),n.doUpdate=n.doUpdate.bind(Object(f.a)(n)),n.transfer=n.transfer.bind(Object(f.a)(n)),n.assetout=n.assetout.bind(Object(f.a)(n)),n}return Object(R.a)(t,e),Object(E.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.ual.activeUser;e&&!this.state.activeUser?this.setState({activeUser:Object(d.a)({},this.activeUser,{accountName:e.accountName})},this.updateAccountBalances):!e&&this.state.activeUser&&this.setState(y)}},{key:"updateAccountBalances",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n,a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.activeUser.accountName,O.map(function(){var e=Object(l.a)(i.a.mark(function e(n){var c,r,o,s,l,p,E,m,v;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=n.split("-"),r=Object(P.a)(c,2),o=r[0],s=r[1],e.next=4,a.state.rpc.get_currency_balance(o,t,s);case 4:l=e.sent,console.log(JSON.stringify(l)),p=l[0].split(" "),E=Object(P.a)(p,2),m=E[0],v=E[1],a.setState({activeUser:Object(d.a)({},a.state.activeUser,{balance:Object(d.a)({},a.state.activeUser.balance,Object(u.a)({},v,m))})}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()),e.next=5,this.state.rpc.get_table_rows({code:"eosusdcom111",scope:"eosusdcom111",table:"user"});case 5:n=e.sent,this.setState(Object(d.a)({},this.state,{userStats:JSON.stringify(n,null,2)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.warn(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderModalButton",value:function(){return c.a.createElement("p",{className:"ual-btn-wrapper"},c.a.createElement(_.a,{role:"button",onClick:this.props.ual.showModal,className:"ual-generic-button"},"Login"))}},{key:"transferb",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n,a,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.ual.activeUser,n=this.state.activeUser.accountName,console.log("a ",n,t),a={actions:[{account:"eosio.token",name:"transfer",authorization:[{actor:n,permission:"active"}],data:{from:n,to:"eosio.token",quantity:"0.0001 EOS",memo:"support"}}]},e.prev=4,e.next=7,t.signTransaction(a,{broadcast:!0});case 7:c=e.sent,console.log("r",c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.warn(e.t0);case 14:case"end":return e.stop()}},e,this,[[4,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a,c,r,o,s,u,l,p,E,m,v,f=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.to,a=t.quantity,c=t.memo,e.prev=1,r=function(e){var t=e.split(" ")[1],n=O.map(function(e){return e.split("-")}).filter(function(e){var n=Object(P.a)(e,2),a=(n[0],n[1]);return t===a});return n[0]?n[0][0]:new Error("Token ".concat(t," not supported"))},o=this.state.activeUser.accountName,s=o,u=r(a),l="".concat(T.RPC_PROTOCOL,"://").concat(T.RPC_HOST,":").concat(T.RPC_PORT),p=new b.JsonRpc(l,{fetch:fetch}),"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK",E=new M.JsSignatureProvider(["5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"]),m=new b.Api({rpc:p,signatureProvider:E,textDecoder:new TextDecoder,textEncoder:new TextEncoder}),this.setState(Object(d.a)({},this.state,{loading:!0})),console.warn("TX: ".concat(l," ").concat(u," ").concat(s," ").concat(n," ").concat(a," ").concat(c)),e.next=15,m.transact({actions:[{account:u,name:"transfer",authorization:[{actor:s,permission:"active"}],data:{from:s,to:n,quantity:a,memo:c}}]},{blocksBehind:3,expireSeconds:30});case 15:v=e.sent,console.dir(v),setTimeout(function(){f.updateAccountBalances(),f.setState(Object(d.a)({},f.state,{loading:!1}))},1e3),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),this.setState(Object(d.a)({},this.state,{loading:!1})),console.error("ERROR: ",e.t0);case 24:case"end":return e.stop()}},e,this,[[1,20]])}));return function(t){return e.apply(this,arguments)}}()},{key:"assetout",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a,c,r,o,s,u,l,p,E,m=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.quantity,a=t.memo,e.prev=1,c=this.state.activeUser.accountName,"eosusdcom111",r=c,o=c,s="".concat(T.RPC_PROTOCOL,"://").concat(T.RPC_HOST,":").concat(T.RPC_PORT),u=new b.JsonRpc(s,{fetch:fetch}),"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK",l=new M.JsSignatureProvider(["5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"]),p=new b.Api({rpc:u,signatureProvider:l,textDecoder:new TextDecoder,textEncoder:new TextEncoder}),this.setState(Object(d.a)({},this.state,{loading:!0})),console.warn("TX: ".concat(s," ").concat("eosusdcom111"," ").concat(o," ").concat(r," ").concat(n," ").concat(a)),e.next=15,p.transact({actions:[{account:"eosusdcom111",name:"assetout",authorization:[{actor:o,permission:"active"}],data:{usern:r,assetout:n,memo:a}}]},{blocksBehind:3,expireSeconds:30});case 15:E=e.sent,console.dir(E),setTimeout(function(){m.updateAccountBalances(),m.setState(Object(d.a)({},m.state,{loading:!1}))},1e3),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(1),this.setState(Object(d.a)({},this.state,{loading:!1})),console.error("ERROR: ",e.t0);case 24:case"end":return e.stop()}},e,this,[[1,20]])}));return function(t){return e.apply(this,arguments)}}()},{key:"updateOracle",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a,c,r,o,s,u=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="feeder111111","oracle111111",a="".concat(T.RPC_PROTOCOL,"://").concat(T.RPC_HOST,":").concat(T.RPC_PORT),c=new b.JsonRpc(a,{fetch:fetch}),"5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK",r=new M.JsSignatureProvider(["5J7gFHsbnU7EpQ4RGrdhAoMnvXnJvWgfiRtvTdMCcVfT6DGkNrK"]),o=new b.Api({rpc:c,signatureProvider:r,textDecoder:new TextDecoder,textEncoder:new TextEncoder}),console.warn("TX: ".concat(a," ").concat("oracle111111"," ").concat(n," ").concat(t)),e.next=10,o.transact({actions:[{account:"oracle111111",name:"write",authorization:[{actor:n,permission:"active"}],data:{owner:n,value:t}}]},{blocksBehind:3,expireSeconds:30});case 10:s=e.sent,console.dir(s),setTimeout(function(){u.updateAccountBalances()},1e3);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"doUpdate",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n,a,c,r,o=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"eosusdcom111","eosusdcom111",t="".concat(T.RPC_PROTOCOL,"://").concat(T.RPC_HOST,":").concat(T.RPC_PORT),n=new b.JsonRpc(t,{fetch:fetch}),"5K9sQVS3KAXe9ecBjs7PEmLXtE5mqvAVKRaytG3DN8aagWmMj4W",a=new M.JsSignatureProvider(["5K9sQVS3KAXe9ecBjs7PEmLXtE5mqvAVKRaytG3DN8aagWmMj4W"]),c=new b.Api({rpc:n,signatureProvider:a,textDecoder:new TextDecoder,textEncoder:new TextEncoder}),console.warn("TX: ".concat(t," ").concat("eosusdcom111"," ").concat("eosusdcom111"," ")),e.next=10,c.transact({actions:[{account:"eosusdcom111",name:"doupdate",authorization:[{actor:"eosusdcom111",permission:"active"}],data:{}}]},{blocksBehind:3,expireSeconds:30});case 10:r=e.sent,console.dir(r),setTimeout(function(){o.updateAccountBalances()},1e3);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.ual.logout,t=this.state,n=t.activeUser,a=t.appName;return c.a.createElement("div",{className:"App"},c.a.createElement(I,{appName:a,activeUser:n,onLogin:this.props.ual.showModal,onLogout:e}),c.a.createElement("div",{style:{display:"flex",justifyContent:"space-around"}},c.a.createElement("div",null,c.a.createElement(j,{activeUser:n})),c.a.createElement("div",null,c.a.createElement(J,{loading:this.state.loading,transfer:this.transfer,assetout:this.assetout})),c.a.createElement("div",null,c.a.createElement(x,{updateOracle:this.updateOracle,doUpdate:this.doUpdate}))),c.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:-4}},c.a.createElement("div",null),c.a.createElement(D,{userStats:this.state.userStats}),c.a.createElement("div",null,c.a.createElement("h2",null,"Global smart contract stats"),this.state.contractState?c.a.createElement("div",{style:{width:200}},c.a.createElement("p",null,this.state.contractState)):null)),c.a.createElement("p",null))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(274),H=n(180),K=Object(H.withUAL)(L),B=T;console.log("EXAMPLE_ENV ",B);var X={chainId:B.CHAIN_ID,rpcEndpoints:[{protocol:B.RPC_PROTOCOL,host:B.RPC_HOST,port:Number(B.RPC_PORT)}]},W=new G.Scatter([X],{appName:"Vigor App"});o.a.render(c.a.createElement(H.UALProvider,{chains:[X],authenticators:[W],appName:"Vigor App"},c.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[285,1,2]]]);
//# sourceMappingURL=main.29a837c7.chunk.js.map